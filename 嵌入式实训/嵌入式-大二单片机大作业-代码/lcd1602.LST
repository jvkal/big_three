C51 COMPILER V9.57.0.0   LCD1602                                                           05/29/2019 17:04:52 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN lcd1602.OBJ
COMPILER INVOKED BY: F:\Keil_v5\C51\BIN\C51.EXE lcd1602.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          //端口定义
   2          #include <reg52.h>
   3          #define  DBPort P0              //LCD数据端口
   4          sbit LcdRs              = P2^0;
   5          sbit LcdRw              = P2^1;
   6          sbit LcdEn      = P2^2;
   7          sbit Lcdbf      = P0^7;         //LCD忙标志 Busy Flag
   8          
   9          void delay(unsigned int t)       //延时
  10          {    
  11   1              while(t--);
  12   1      }
  13          
  14          void  LCD_Wait(void)    //读忙状态
  15          {
  16   1              LcdRs=0;
  17   1              LcdRw=1;
  18   1              LcdEn=1;delay(10);LcdEn=0;      //下降沿        
  19   1              while(Lcdbf)
  20   1              {
  21   2                LcdEn=0;LcdEn=1;       //仿真才需要此语句,实际硬件中不需要
  22   2              }                       
  23   1      } 
  24          
  25          void LCD_Write(bit style, unsigned char input)   //写数据1/命令0
  26          {
  27   1              LcdRs=style;
  28   1              LcdRw=0;                
  29   1              DBPort=input;   
  30   1              LcdEn=1;delay(10);LcdEn=0;                      
  31   1              LCD_Wait();     
  32   1      }
  33          
  34          void LCD_Initial(void)                    //初始化LCD
  35          {
  36   1              LCD_Write(0,0x38);               //8位数据端口,2行显示,5*7点阵
  37   1              delay(300);
  38   1              LCD_Write(0,0x0c);           //显示模式
  39   1              LCD_Write(0,0x01);           //清屏
  40   1              LCD_Write(0,0x06);           //输入模式
  41   1      }
  42          
  43          void GotoXY(unsigned char x, unsigned char y)  //移动光标到指定位置
  44          {
  45   1              if(y==0)        LCD_Write(0,0x80|x);
  46   1              if(y==1)    LCD_Write(0,0xc0|x);
  47   1      }
  48          
  49          void Print(unsigned char *str)   //指定坐标输出字符串
  50          {
  51   1              while(*str)  LCD_Write(1,*str++);
  52   1      }
  53          
  54          

C51 COMPILER V9.57.0.0   LCD1602                                                           05/29/2019 17:04:52 PAGE 2   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    161    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
